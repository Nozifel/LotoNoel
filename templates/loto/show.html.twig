{% extends 'base.html.twig' %}

{% block title %}Loto fiche{% endblock %}

{% block body %}
<section class="section">
    <div class="container">
        <div class="columns is-multiline">
            <div class="column is-full">
                <h1 class="title">Loto - {{ loto.nom }}</h1>
            </div>

            <div class="column is-full">
                {{ include('loto/card.html.twig') }}
            </div>

            {% if app.user in loto.joueurs %}
                <div class="column is-full">
                    <h3 class="title is-3">Mes numéros</h3>
                    {#<div id="liste-tirages">
                        {% if tirages %}
                            {% for tirage in tirages %}
                                <span class="tirage has-background-danger">{{ tirage.nombre }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>#}
                </div>
                <div class="column is-full">
                {% if tiragesJoueur %}
                    <div class="box">
                        <div id="ma-grille">
                            {% set count = 0 %}
                            {% for i in 0..loto.hauteurGrille-1 %}
                                <div class="ligne-grille">
                                    {% for j in 0..loto.largeurGrille-1 %}
                                        <span class="tirage-grille is-sortable">
                                            <span class="tirage has-background-danger">{{ tiragesJoueur[ count ].nombre }}</span>
                                            <input type="text" name="c[{{ i }}][{{ j }}]" id="{{ i }}-{{ j }}-{{ loto.id }}" value="">
                                        </span>
                                        {% set count = (count + 1) %}
                                    {% endfor %}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% else %}
                    <div class="box">Aucun numéros actuellement.</div>
                {% endif %}
                </div>
            {% endif %}

            <div class="column is-full">
                <h3 class="title is-3">Autres joueurs</h3>
            </div>
            {% for tirage in tirages %}
                <div class="column is-one-third">
                    <div class="box">
                        <a class="has-text-centered mb-5 is-block" href="{{ path('user_show', {'id': tirage[0].joueur.id}) }}">{{ tirage[0].joueur.prenom }} {{ tirage[0].joueur.nom }}</a>
                        {% if tirage %}
                            <div class="grille-joueur">
                                {% set count = 0 %}
                                {% for i in 0..loto.hauteurGrille-1 %}
                                    <div class="ligne-grille">
                                        {% for j in 0..loto.largeurGrille-1 %}
                                            <span class="tirage-grille">
                                                    <span class="tirage has-background-danger">{{ tirage[ count ].nombre }}</span>
                                                </span>
                                            {% set count = (count + 1) %}
                                        {% endfor %}
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="box">Aucun numéros actuellement.</div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}

            <div class="column is-full">
                <a href="{{ path('loto_index') }}" class="button">Retour à la liste</a>
            </div>

            {% if loto.auteur.id == app.user.id %}
                <div class="column is-full">
                    <a href="{{ path('loto_edit', {'id': loto.id}) }}" class="button is-link">Modifier</a>
                </div>

                <div class="column is-full">
                    {{ include('loto/_delete_form.html.twig') }}
                </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
